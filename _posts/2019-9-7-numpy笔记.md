---
layout:     post
title:      numpy笔记
subtitle:   #
date:       2019-9-7
author:     y00
header-img: img/asuna.jpg
catalog: true
tags:
    - python
    - numpy
    - 机器学习
---

# numpy是什么
NumPy 是支持 Python 语言的数值计算扩充库，其拥有强大的多维数组处理与矩阵运算能力。除此之外，NumPy 还内建了大量的函数，方便你快速构建数学模型。

它可以进行：

* 数值类型及多维数组
* 数组操作及随机抽样
* 数学函数及代数运算
* 数组索引及其他用法

# 创建一个np数组

## 用array可以将列表或者元组转换成矩阵

```python
import numpy as np

a=np.array([[1,2,3],[4,5,6],[7,8,9]]) #列表转换成矩阵
print(a)


b=(1.0,2.0,3.0,4.0)
print(b) 
print(np.array(b)) #元组b转换成矩阵

k=np.array( ((1,2),(3,4)) ) #元组k转换成矩阵
print(k)

```
out:

```
 [[1 2 3]
 [4 5 6]
 [7 8 9]]
(1.0, 2.0, 3.0, 4.0)
[1. 2. 3. 4.]
[[1 2]
 [3 4]]
```

## arange方法创建

```python
import numpy as np
#arange(左闭右开区间，步长)
a=np.arange(1,10,1)
print(a)

```
out:
```
[1 2 3 4 5 6 7 8 9]
```

## linspace 方法创建

和arange类似用法，第三个参数不表示步长而是num数量，可以通过对endpoint和retstep的设置改变返回结果

endpoint：布尔值，如果为真，则最后一个样本包含在序列内。

retstep：布尔值，如果为真，返回间距。

```python
np.linspace(0, 10, 10, endpoint=True,retstep=True)
np.linspace(0, 10, 10, endpoint=False,retstep=True)
```
out:

```
 (array([ 0.        ,  1.11111111,  2.22222222,  3.33333333,  4.44444444,
        5.55555556,  6.66666667,  7.77777778,  8.88888889, 10.        ]), 1.1111111111111112) #不包含最后样本
 (array([0., 1., 2., 3., 4., 5., 6., 7., 8., 9.]), 1.0) #间距1.0，
```

## ones 方法创建

用于快速创建数值全部为 1 的多维数组。

```python
import numpy as np
a=np.ones((4,5))
print(a)
```

out:

```
 [[1. 1. 1. 1. 1.]
 [1. 1. 1. 1. 1.]
 [1. 1. 1. 1. 1.]
 [1. 1. 1. 1. 1.]]
```
## zeros 方法创建
和ones类似，但填充是0

## eye 方法创建
和ones类似，其特点是k （第三个参数）对角线上的值为 1，其余值全部为0
k：0（默认）是指主对角线，正值是指上对角线，负值是指下对角线

```python
import numpy as np
a=np.eye(5,5)
print(a)
```
out:

```
 [[1. 0. 0. 0. 0.]
 [0. 1. 0. 0. 0.]
 [0. 0. 1. 0. 0.]
 [0. 0. 0. 1. 0.]
 [0. 0. 0. 0. 1.]]
```

```python
import numpy as np
a=np.eye(5,5,1)
print(a)
```

out:

```
 [[0. 1. 0. 0. 0.]
 [0. 0. 1. 0. 0.]
 [0. 0. 0. 1. 0.]
 [0. 0. 0. 0. 1.]
 [0. 0. 0. 0. 0.]]
```

# numpy数组类型

类型 |	解释 
 --- | ---
bool |	布尔类型，1 个字节，值为 True 或 False。
int	 |整数类型，通常为 int64 或 int32 。
intc	|与 C 里的 int 相同，通常为 int32 或 int64。
intp	|用于索引，通常为 int32 或 int64。
int8	|字节（从 -128 到 127）
int16	|整数（从 -32768 到 32767）
int32	|整数（从 -2147483648 到 2147483647）
int64	|整数（从 -9223372036854775808 到 9223372036854775807）
uint8	|无符号整数（从 0 到 255）
uint16	|无符号整数（从 0 到 65535）
uint32	|无符号整数（从 0 到 4294967295）
uint64	|无符号整数（从 0 到 18446744073709551615）
float	|float64 的简写。
float16	|半精度浮点，5 位指数，10 位尾数
float32	|单精度浮点，8 位指数，23 位尾数
float64	|双精度浮点，11 位指数，52 位尾数
complex	|complex128 的简写。
complex64	|复数，由两个 32 位浮点表示。
complex128	|复数，由两个 64 位浮点表示。

**上述类型都是dtype对象的实例**

可以通过dtype指定类型

例如

```python
import numpy as np
a=np.ones((4,5),dtype='int')
print(a)

```

```
 [[1 1 1 1 1]
 [1 1 1 1 1]
 [1 1 1 1 1]
 [1 1 1 1 1]]
```

```python
import numpy as np
print( np.array([[1, 2, 3], [4, 5, 6]],dtype='float64') )
```

```
 [[1. 2. 3.]
 [4. 5. 6.]]

```

# 从已知数据中创建
* frombuffer（buffer）：将缓冲区转换为 1 维数组。
* fromfile（file，dtype，count，sep）：从文本或二进制文件中构建多维数组。
* fromfunction（function，shape）：通过函数返回值来创建多维数组。
* fromiter（iterable，dtype，count）：从可迭代对象创建 1 维数组。
* fromstring（string，dtype，count，sep）：从字符串中创建 1 维数组。

```python
import numpy as np
print( np.fromfunction(lambda a, b: a + b, (5, 4)) ) # xy处的值为x+y
```

```
 [[0. 1. 2. 3.]
 [1. 2. 3. 4.]
 [2. 3. 4. 5.]
 [3. 4. 5. 6.]
 [4. 5. 6. 7.]]

```

# 矩阵操作

## .T输出转置

```python
import numpy as np
a = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
print(a.T)
```

```
 [[1 4 7]
 [2 5 8]
 [3 6 9]]
```

## .dtype输出类型名字

```python
import numpy as np
a = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
print(a.dtype)
```

```
int64
```
## 其他方法

.imag 和 .real输出矩阵的虚、实部（复数）

.size 输出有多少个元素

.itemsize 输出单个元素的字节数

.nbytes 输出整个矩阵的总字节数

例如3*3的矩阵 前者如果是8 后者就是72（字节）
 
 .shape 输出维数数组
 3*3的矩阵输出（3,3）

# 维数展开 ravel
```python
import numpy as np
a = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
print(np.ravel(a))
```

np中的ravel方法将指定对象转换成一维数组

```
 [1 2 3 4 5 6 7 8 9]
```

# 重塑 reshape

按照a.reshape()括号中的维数输出，如果10个元素用诸如（3，5）这样的方式会报错

```python
import numpy as np
a = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
print(a.reshape(9,1))
```

```
 [[1]
 [2]
 [3]
 [4]
 [5]
 [6]
 [7]
 [8]
 [9]]
```

# as类型转换

* asarray(a，dtype，order)：将特定输入转换为数组。(order 包括字符 'C' 'F',C是默认按行读，F表示按列读)
* asanyarray(a，dtype，order)：将特定输入转换为 ndarray。
* asmatrix(data，dtype)：将特定输入转换为矩阵。
* asfarray(a，dtype)：将特定输入转换为 float 类型的数组。
* asarray_chkfinite(a，dtype，order)：将特定输入转换为数组，检查 NaN 或 infs。
* asscalar(a)：将大小为 1 的数组转换为标量。

# concatenate 可以将多个数组沿指定轴连接在一起

```python
import numpy as np
a = np.array([[1, 2], [3, 4], [5, 6]])
b = np.array([[7, 8], [9, 10]])
c = np.array([[11, 12]])
abc=np.concatenate((a, b, c), axis=0) #axis=1则表示按照横轴连接
print(abc)
```

```
[[ 1  2]
 [ 3  4]
 [ 5  6]
 [ 7  8]
 [ 9 10]
 [11 12]]
```

```python
import numpy as np
a = np.array([[1, 2], [3, 4], [5, 6]])
b = np.array([[7, 8, 9]])
abc=np.concatenate((a, b.T), axis=1)#为了连接不报错，b需要转置
print(abc)
```

```
[[1 2 7]
 [3 4 8]
 [5 6 9]]
```

# 堆叠 stack

```python
import numpy as np
a = np.array([1, 2, 3])
b = np.array([4, 5, 6])
AandB=np.stack((a, b))
print(AandB)
```

```
 [[1 2 3]
 [4 5 6]]
```

# 拆分 split

```python
import numpy as np
AandB= np.array([[1, 2 ,3],[4, 5 ,6]])
a,b=np.split(AandB,2)
print(a,b)
```

```
 [[1 2 3]] [[4 5 6]]
```

# 删除 delete

delete(arr，obj，axis)：沿特定轴删除数组中的子数组。

```python
import numpy as np
a = np.arange(12).reshape(3, 4) #创建一个3*4的数组
print(a)
print(np.delete(a, 2, 1)) 
#删除其中的第2列（0开始计），第三参数axis=1表示列，为0表示行
```

```
 [[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
 
[[ 0  1  3]
 [ 4  5  7]
 [ 8  9 11]]
```

# 插入 insert

例如np.insert(a, 2, b, 0)表示对a的第二行插入b，第四个参数是axis判断

# 增加 append

append表示增加到末尾，但始终返回一维数组
```
import numpy as np
a = np.arange(6).reshape(2, 3)
b = np.arange(3)
print(np.append(a, b))
print(np.append(a,1))
```

```
 [0 1 2 3 4 5 0 1 2]
[0 1 2 3 4 5 1]
```
