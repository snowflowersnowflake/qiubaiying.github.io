---
layout:     post
title:      pandas笔记
subtitle:   #
date:       2019-9-21
author:     y00
header-img: img/ayano.jpg
catalog: true
tags:
    - python
    - pandas
    - 机器学习
---

```html
<iframe
  frameborder="no"
  border="0"
  marginwidth="0"
  marginheight="0"
  width="330"
  height="86"
  src="//music.163.com/outchain/player?type=2&id=452051508&auto=0&height=66"
></iframe>

```

# 引言
Pandas 是基于 NumPy 的一种数据处理工具，该工具为了解决数据分析任务而创建。
Pandas 纳入了大量库和一些标准的数据模型，提供了高效地操作大型数据集所需的函数和方法。
对于机器学习算法的练习题来说，pandas更是必不可少，往往决定正确率的是特征工程而不是使用的算法模型。
pandas常常和numpy一起使用，进行数据的采样与处理。

# Pandas 的数据结构
Pandas 主要有 Series（一维数组），DataFrame（二维数组），Panel（三维数组），Panel4D（四维数组），PanelND（更多维数组）等数据结构。
其中 Series 和 DataFrame 应用的最为广泛。

* Series 是一维带标签的数组，它可以包含任何数据类型。包括整数，字符串，浮点数，Python 对象等。Series 可以通过标签来定位。
* DataFrame 是二维的带标签的数据结构。我们可以通过标签来定位数据。这是 NumPy 所没有的。

#导入所需要使用到的库

```python
import pandas as pd
import numpy as np
print(pd.__version__)#打印版本
```

# Series
Pandas 中，Series 可以被看作由 1 列数据组成的数据集。
创建 Series 语法：s = pd.Series(data, index=index)，可以通过多种方式进行创建。

```python

#创建Seies数据类型,Series可以被看作由 1 列数据组成的数据集。
arr=[0,1,2,3,4]
s1=pd.Series(arr)
print(s1)#两列，前为索引后为值

print()


#从numpy的ndarray创建
n=np.random.randn(5)#随机数组创建
print(n)
index=['a','b','c','d','e']
s2=pd.Series(n,index=index)
print(s2)
print()

#从字典创建Series
d={'a':1,'b':2,'c':3,'d':4,'e':5}
s3=pd.Series(d)
print(s3)
print()

#Series基本操作

#修改索引(s1)
s1.index=['A','B','C','D','E']
print(s1)
print()

#纵向拼接
s4=s3.append(s1)
print(s4)
print()

#指定删除索引元素
s4=s4.drop('e')
print(s4)
print()

#指定修改值
s4['A']=6
print(s4)
print()

#指定查找
print(s4['B'])
print()

#Series切片
print(s4[:3])
print()

#Series 加法运算
#Series 的运算都是按照索引计算，如果索引不同则填充为 NaN（空值）
print(s4.add(s3))
print()

#减法运算
print(s4.sub(s3))
print()

#乘法
print(s4.mul(s3))
print()

#除法
print("div:",s4.div(s3))
print()

#求中位数
print("me:",s4.median())
print()

#求和
print("sum:",s4.sum())
print()

#最大值
print("max:",s4.max())
print()

#最小值
print("min:",s4.min())
print()
```

```txt
运行结果
0.24.2
0    0
1    1
2    2
3    3
4    4
dtype: int64

[-1.03279658 -2.99352314  1.95373409 -0.49103033 -1.33308093]
a   -1.032797
b   -2.993523
c    1.953734
d   -0.491030
e   -1.333081
dtype: float64

a    1
b    2
c    3
d    4
e    5
dtype: int64

A    0
B    1
C    2
D    3
E    4
dtype: int64

a    1
b    2
c    3
d    4
e    5
A    0
B    1
C    2
D    3
E    4
dtype: int64

a    1
b    2
c    3
d    4
A    0
B    1
C    2
D    3
E    4
dtype: int64

a    1
b    2
c    3
d    4
A    6
B    1
C    2
D    3
E    4
dtype: int64

1

a    1
b    2
c    3
dtype: int64

A    NaN
B    NaN
C    NaN
D    NaN
E    NaN
a    2.0
b    4.0
c    6.0
d    8.0
e    NaN
dtype: float64

A    NaN
B    NaN
C    NaN
D    NaN
E    NaN
a    0.0
b    0.0
c    0.0
d    0.0
e    NaN
dtype: float64

A     NaN
B     NaN
C     NaN
D     NaN
E     NaN
a     1.0
b     4.0
c     9.0
d    16.0
e     NaN
dtype: float64

div: A    NaN
B    NaN
C    NaN
D    NaN
E    NaN
a    1.0
b    1.0
c    1.0
d    1.0
e    NaN
dtype: float64

me: 3.0

sum: 26

max: 6

min: 1


```

# DataFrame
与 Sereis 不同，DataFrame 可以存在多列数据。一般情况下，DataFrame 也更加常用。
```python
#通过 NumPy 数组创建 DataFrame,用于存储多列,常用
#定义时间序列作为索引，传入随机数，col作为列名
dates=pd.date_range('today',periods=6)
num_arr=np.random.randn(6,4)
columns=['A','B','C','D',]
df1=pd.DataFrame(num_arr,index=dates,columns=columns)
print(df1)
print()

#通过字典创建,label作为索引，data字典索引作为列名，字典值作为数据
data = {'animal': ['cat', 'cat', 'snake', 'dog', 'dog', 'cat', 'snake', 'cat', 'dog', 'dog'],
        'age': [2.5, 3, 0.5, np.nan, 5, 2, 4.5, np.nan, 7, 3],
        'visits': [1, 3, 2, 3, 2, 3, 1, 1, 2, 1],
        'priority': ['yes', 'yes', 'no', 'yes', 'no', 'no', 'no', 'yes', 'no', 'no']}

labels = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j']
df2 = pd.DataFrame(data, index=labels)
print(df2)
print()

#查看dataframe的数据类型
print(df2.dtypes)
print()

#datafr的基本操作
#预览前五行，对数据集产生快速的印象
print(df2.head())
print()
#自定义预览
print(df2.head(6))#6行
print()

#预览后三行
print(df2.tail(3))
print()

#查看索引
print(df2.index)
print()

#查看列名
print(df2.columns)
print()

#查看数据
print(df2.values)
print()

#查看统计数据（均值，标准差，分位数）
print(df2.describe())
print()

#转置
print(df2.T)
print()

#按列排序
print(df2.sort_values(by='age'))#按照age的升序
print()

#数据切片
print(df2[1:3])
print()

#标签查询
print(df2['age'])#等价于df2.age
print()

#多列标签查询
print(df2[['age','animal']])
print()

#行查询
print(df2.iloc[1:3])#2,3两行
print()

#copy
df3=df2.copy()
print(df3)
print()

#
