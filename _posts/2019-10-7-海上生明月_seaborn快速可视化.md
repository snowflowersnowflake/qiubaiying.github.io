---
layout:     post
title:      海上生明月_seaborn快速可视化
subtitle:   #基于plt的可视化封装
date:       2019-10-7
author:     y00
header-img: img/asuna.jpg
catalog: true
tags:
    - python
    - seaborn
    - 数据可视化
    - 机器学习
---

<iframe
  frameborder="no"
  border="0"
  marginwidth="0"
  marginheight="0"
  width="330"
  height="86"
  src="//music.163.com/outchain/player?type=2&id=4909215&auto=0&height=66"
></iframe>
<br>
<box>
<p1>

海上生明月，天涯共此时。
<br>
情人怨遥夜，竟夕起相思。
<br>
灭烛怜光满，披衣觉露滋。
<br>
不堪盈手赠，还寝梦佳期。

</p1>
</box>

# seaborn

在进行数据可视化过程中常常会用到plt，seaborn是基于plt的封装

如果你不介意自定义颜色这些琐碎的事情，那么seaborn能让你快捷方便地进行数据可视化(说白了就是很简单)，而且**非常漂亮**

seaborn这个库的名字也很漂亮，不知道是哪位工程师突然想到的

seaborn也有官方文档和详细示例，如果想要得到详细信息可以参考[这个链接](http://seaborn.pydata.org/)

anaconda中可以快速安装

# 实例

为了展示一些便利的常用功能，一些实例自然必不可少

通常我们会import seaborn as sns

这里均采用自官方的样例演示并说明，使用sns.load_dataset("")方法可以导入自带数据集

但是，因为截图以及上传图片是一个琐碎的过程，对于样例中生成的图片就不再展示，**本文代码均可直接复制运行生成结果**

# Anscombe安斯康姆的四重奏

1973年，统计学家F.J. Anscombe构造出了四组奇特的数据。它告诉人们，在分析数据之前，描绘数据所对应的图像有多么的重要。

这四组数据中，x值的平均数都是9.0，y值的平均数都是7.5；

x值的方差都是10.0，y值的方差都是3.75；

它们的相关度都是0.816，线性回归线都是y=3+0.5x。

单从这些统计数字上看来，四组数据所反映出的实际情况非常相近，而事实上，这四组数据有着天壤之别。

这种差别也只能通过图表体现，本文选用线性回归进行拟合分析，所以**这四组数据告诉了人们用图表进行统计分析的重要性**

在下面的示例代码中，df = sns.load_dataset("anscombe")加载了这个数据集置入pd的df对象中。

因为数据集规模不大，以下是打印出的完整数据集内容
```txt
   dataset     x      y
0        I  10.0   8.04
1        I   8.0   6.95
2        I  13.0   7.58
3        I   9.0   8.81
4        I  11.0   8.33
5        I  14.0   9.96
6        I   6.0   7.24
7        I   4.0   4.26
8        I  12.0  10.84
9        I   7.0   4.82
10       I   5.0   5.68
11      II  10.0   9.14
12      II   8.0   8.14
13      II  13.0   8.74
14      II   9.0   8.77
15      II  11.0   9.26
16      II  14.0   8.10
17      II   6.0   6.13
18      II   4.0   3.10
19      II  12.0   9.13
20      II   7.0   7.26
21      II   5.0   4.74
22     III  10.0   7.46
23     III   8.0   6.77
24     III  13.0  12.74
25     III   9.0   7.11
26     III  11.0   7.81
27     III  14.0   8.84
28     III   6.0   6.08
29     III   4.0   5.39
30     III  12.0   8.15
31     III   7.0   6.42
32     III   5.0   5.73
33      IV   8.0   6.58
34      IV   8.0   5.76
35      IV   8.0   7.71
36      IV   8.0   8.84
37      IV   8.0   8.47
38      IV   8.0   7.04
39      IV   8.0   5.25
40      IV  19.0  12.50
41      IV   8.0   5.56
42      IV   8.0   7.91
43      IV   8.0   6.89
```


```python
#some ex for seaborn
import seaborn as sns
import matplotlib.pyplot as plt

sns.set(style="ticks")

# Load the example dataset for Anscombe's quartet
df = sns.load_dataset("anscombe")

# Show the results of a linear regression within each dataset
sns.lmplot(x="x", y="y", col="dataset", hue="dataset", data=df,
           col_wrap=2, ci=None, palette="muted", height=4,
           scatter_kws={"s": 50, "alpha": 1})
plt.show()
```

## .set

_style可以设置审美风格：None, or one of {darkgrid, whitegrid, dark, white, ticks}

ticks表示有坐标轴**刻度**的风格，其他类型很显然

_context能够设置文本参数{paper, notebook, talk, poster}

_palette可以设置颜色，
设置的方法可以参考

[这个链接](http://seaborn.pydata.org/generated/seaborn.color_palette.html#seaborn.color_palette)

_font可以设置字体,也就是font-family，和plt中的模式一样

sns.palplot(sns.color_palette())

可以看到绘制出的调色板

_rc 可以设置rc参数,因为seaborn对plt的封装，如果你想要像使用**plt的方式**进行细致的参数修改，例如线条宽度，颜色样式，等等这些seaborn没有提供api的，可通过这种方式设定。

例如c = plotting_context("talk", rc={"lines.linewidth": 2})中rc修改了文本的线宽


## .lmplot

可以绘制**线性回归**图像，包括了大量的参数，这里只说明上方样例涉及到的

对于其他绘图方式，比如矩阵图matrix plots，分布图distribution plots，等等，可以参考[官方文档](http://seaborn.pydata.org/api.html)

_x,y可以填入string来为坐标轴加上label

_hue,col,row可以加入对图表性质的注释

_data传入一个dataframe对象

_col_wrap 决定了最后展示的时候一行有多少个图表，该df包含了四组数据，所以如果_col_wrap=2，plt_show的时候一排会有两个图表，如果_col_wrap=4，一排会打印出四个图表。

_ci 表示允许的误差范围（空值误差的百分比，0-100之间），可为‘sd’，则采用标准差（默认95），在数据有误差需要体现在图表上的时候可以设置这个参数，误差部分被画成阴影

_scatter_kws 为附加参数，s表示散点大小，alpha表示散点透明度


# 


<style type="text/css">
 p1 {font-family: STXingkai;font-weight:400;font-size:130%; }
</style>
